language: python

python:
  - 3.7

services:
  - mysql

before_install:
  - export DJANGO_SETTINGS_MODULE=museum_webapp.settings

install:
  - pip install -r requirements.txt

before_script:
  - mysql -e 'CREATE DATABASE IF NOT EXISTS travis_ci_db;' -uroot
  - mysql -e "GRANT ALL PRIVILEGES ON *.* TO 'travis'@'localhost';" -uroot 
  - python manage.py migrate

script:
  - python manage.py test